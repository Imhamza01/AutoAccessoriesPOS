<!-- Auto Accessories POS - Notifications Component -->
<div class="notification-item" id="notification-template" style="display: none;">
    <div class="notification-content">
        <div class="notification-icon"></div>
        <div class="notification-message">
            <div class="notification-title"></div>
            <div class="notification-text"></div>
        </div>
    </div>
    <button class="notification-close">&times;</button>
    <div class="notification-progress"></div>
</div>

<style>
/* Notification Container */
#notification-container {
    position: fixed;
    top: 80px;
    right: 20px;
    z-index: 1100;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    max-width: 400px;
    pointer-events: none;
}

/* Notification Item */
.notification-item {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    padding: 1rem;
    background: white;
    border-radius: 0.5rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    border-left: 4px solid #3498db;
    animation: slideInRight 0.3s ease;
    pointer-events: auto;
    position: relative;
    overflow: hidden;
}

@keyframes slideInRight {
    from {
        transform: translateX(400px);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutRight {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(400px);
        opacity: 0;
    }
}

.notification-item.removing {
    animation: slideOutRight 0.3s ease forwards;
}

/* Notification Types */
.notification-item.success {
    border-left-color: #27ae60;
    background: linear-gradient(to right, #d5f4e6 0%, white 50%);
}

.notification-item.error {
    border-left-color: #e74c3c;
    background: linear-gradient(to right, #fadbd8 0%, white 50%);
}

.notification-item.warning {
    border-left-color: #e67e22;
    background: linear-gradient(to right, #fdebd0 0%, white 50%);
}

.notification-item.info {
    border-left-color: #3498db;
    background: linear-gradient(to right, #d6eaf8 0%, white 50%);
}

/* Notification Icon */
.notification-icon {
    font-size: 1.5rem;
    min-width: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.notification-item.success .notification-icon::before {
    content: '✓';
    color: #27ae60;
}

.notification-item.error .notification-icon::before {
    content: '✕';
    color: #e74c3c;
}

.notification-item.warning .notification-icon::before {
    content: '⚠';
    color: #e67e22;
}

.notification-item.info .notification-icon::before {
    content: 'ℹ';
    color: #3498db;
}

/* Notification Content */
.notification-content {
    display: flex;
    gap: 1rem;
    flex: 1;
}

.notification-message {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.notification-title {
    font-weight: 600;
    color: #2c3e50;
    font-size: 0.95rem;
}

.notification-text {
    color: #7f8c8d;
    font-size: 0.85rem;
    line-height: 1.4;
}

/* Notification Close Button */
.notification-close {
    background: none;
    border: none;
    font-size: 1.25rem;
    color: #95a5a6;
    cursor: pointer;
    padding: 0;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    flex-shrink: 0;
}

.notification-close:hover {
    color: #2c3e50;
    transform: scale(1.2);
}

/* Notification Progress Bar */
.notification-progress {
    position: absolute;
    bottom: 0;
    left: 0;
    height: 3px;
    background: linear-gradient(90deg, transparent, currentColor);
    animation: progress 3s linear forwards;
}

.notification-item.success .notification-progress {
    background: linear-gradient(90deg, #27ae60 0%, transparent 100%);
}

.notification-item.error .notification-progress {
    background: linear-gradient(90deg, #e74c3c 0%, transparent 100%);
}

.notification-item.warning .notification-progress {
    background: linear-gradient(90deg, #e67e22 0%, transparent 100%);
}

.notification-item.info .notification-progress {
    background: linear-gradient(90deg, #3498db 0%, transparent 100%);
}

@keyframes progress {
    from {
        width: 100%;
    }
    to {
        width: 0%;
    }
}

/* Responsive */
@media (max-width: 768px) {
    #notification-container {
        left: 10px;
        right: 10px;
        max-width: none;
        top: 70px;
    }

    .notification-item {
        padding: 0.75rem;
        gap: 0.75rem;
    }

    .notification-title {
        font-size: 0.9rem;
    }

    .notification-text {
        font-size: 0.8rem;
    }
}

@media (max-width: 480px) {
    #notification-container {
        gap: 0.5rem;
    }

    .notification-item {
        padding: 0.625rem;
    }
}
</style>

<script>
// Notification Manager
class NotificationManager {
    constructor() {
        this.notifications = [];
        this.maxNotifications = 5;
    }

    create(type, title, message, duration = 3000) {
        const container = document.getElementById('notification-container');
        if (!container) return;

        // Remove oldest notification if at max
        if (this.notifications.length >= this.maxNotifications) {
            const oldest = this.notifications[0];
            this.remove(oldest.id);
        }

        const id = Math.random().toString(36).substr(2, 9);
        const template = document.getElementById('notification-template');
        
        if (!template) return;

        // Clone template
        const notification = template.cloneNode(true);
        notification.id = 'notification-' + id;
        notification.style.display = 'flex';
        notification.classList.add(type);

        // Set content
        const titleEl = notification.querySelector('.notification-title');
        const textEl = notification.querySelector('.notification-text');
        
        if (titleEl) titleEl.textContent = title;
        if (textEl) textEl.textContent = message;

        // Add close button handler
        const closeBtn = notification.querySelector('.notification-close');
        if (closeBtn) {
            closeBtn.onclick = () => this.remove(id);
        }

        // Add to DOM
        container.appendChild(notification);

        // Store reference
        const item = { id, notification, timeoutId: null };
        this.notifications.push(item);

        // Auto remove
        if (duration > 0) {
            item.timeoutId = setTimeout(() => this.remove(id), duration);
        }

        return id;
    }

    remove(id) {
        const index = this.notifications.findIndex(n => n.id === id);
        if (index !== -1) {
            const item = this.notifications[index];
            
            if (item.timeoutId) {
                clearTimeout(item.timeoutId);
            }

            // Add removing animation
            item.notification.classList.add('removing');
            
            // Remove after animation
            setTimeout(() => {
                item.notification.remove();
                this.notifications.splice(index, 1);
            }, 300);
        }
    }

    success(title, message, duration) {
        return this.create('success', title, message, duration || 3000);
    }

    error(title, message, duration) {
        return this.create('error', title, message, duration || 4000);
    }

    warning(title, message, duration) {
        return this.create('warning', title, message, duration || 3500);
    }

    info(title, message, duration) {
        return this.create('info', title, message, duration || 3000);
    }

    clear() {
        this.notifications.forEach(item => this.remove(item.id));
    }
}

// Global instance
const notificationManager = new NotificationManager();

// Helper functions
function showNotification(type, title, message, duration) {
    return notificationManager.create(type, title, message, duration);
}

function showSuccessNotification(title, message) {
    return notificationManager.success(title, message);
}

function showErrorNotification(title, message) {
    return notificationManager.error(title, message);
}

function showWarningNotification(title, message) {
    return notificationManager.warning(title, message);
}

function showInfoNotification(title, message) {
    return notificationManager.info(title, message);
}

// Make available globally
if (typeof window !== 'undefined') {
    window.showNotification = showNotification;
    window.showSuccessNotification = showSuccessNotification;
    window.showErrorNotification = showErrorNotification;
    window.showWarningNotification = showWarningNotification;
    window.showInfoNotification = showInfoNotification;
}
</script>
